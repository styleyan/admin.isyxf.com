(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a33a064"],{"0132":function(e,t,a){"use strict";var l=a("0867"),i=a.n(l);i.a},"0867":function(e,t,a){},"3f1c":function(e,t,a){},"7b3eb":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:e.dialogWidth,title:e.title,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.rowData}},e._l(e.itemList,function(t,l){return a("el-form-item",{key:l,class:{"switch-item":"switch"===t.type||"radio"===t.type},attrs:{label:t.label,"label-width":e.formLabelWidth}},["switch"===t.type?[a("el-switch",{staticStyle:{"text-align":"left"},attrs:{"active-value":1,"inactive-value":0},model:{value:e.rowData[t.key],callback:function(a){e.$set(e.rowData,t.key,a)},expression:"rowData[item.key]"}})]:e._e(),"input"===t.type||"textarea"===t.type?[a("el-input",{attrs:{type:t.type,rows:t.rows||0,placeholder:t.placeholder},model:{value:e.rowData[t.key],callback:function(a){e.$set(e.rowData,t.key,a)},expression:"rowData[item.key]"}})]:e._e(),"radio"===t.type?[a("el-radio-group",{model:{value:e.rowData[t.key],callback:function(a){e.$set(e.rowData,t.key,a)},expression:"rowData[item.key]"}},e._l(t.radios,function(t){return a("el-radio",{key:t.key,attrs:{label:t.key}},[e._v(e._s(t.label))])}),1)]:e._e()],2)}),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.buttonHandle(!1)}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.buttonHandle(!0)}}},[e._v("确 定")])],1)],1)},i=[],o=(a("ac6a"),{clone:function(e){return JSON.parse(JSON.stringify(e))}}),n={name:"global-dialog-classify",props:{title:{type:String,default:""},dialogWidth:{type:String,default:"500px"},itemList:{type:Array,default:function(){return[]}}},data:function(){return{dialogFormVisible:!1,formLabelWidth:"80px",rowData:this.initKeys(),type:0}},methods:{initKeys:function(){var e=this.itemList.map(function(e){return e.key}),t={};return e.forEach(function(e){t[e]=""}),t},buttonHandle:function(e){e&&this.$emit("submit",this.rowData,this.type),this.dialogFormVisible=!this.dialogFormVisible},toggleVisibleHandle:function(e){e?(this.type="update",this.rowData=o.clone(e)):(this.type="add",this.rowData=this.initKeys()),this.dialogFormVisible=!this.dialogFormVisible}}},r=n,s=(a("e08e"),a("2877")),c=Object(s["a"])(r,l,i,!1,null,null,null);t["a"]=c.exports},"89f7":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("global-layout",[a("global-container-top",{attrs:{placeholder:"请输入影视名"},on:{searchHandle:e.searchHandle,addHandle:e.showDialog}}),a("el-table",{staticClass:"books-list",attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"gmtCreate",label:"添加时间",width:"180"}}),a("el-table-column",{attrs:{prop:"movieName",label:"名称"}}),a("el-table-column",{attrs:{prop:"type",label:"类型",formatter:e.formatterHandle}}),a("el-table-column",{attrs:{prop:"movieScore",label:"评分"}}),a("el-table-column",{attrs:{label:"评价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"top",trigger:"hover",content:t.row.movieEvaluate}},[a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{width:"160",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return e.switchChangeHandle(a,t.row)}},model:{value:t.row.state,callback:function(a){e.$set(t.row,"state",a)},expression:"scope.row.state"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("global-popover",{on:{submit:function(a){return e.handleDelete(t.row)}}})]}}])})],1),a("global-page",{ref:"globalPage",attrs:{request:"moviesList",searchParam:!0},on:{receiveData:e.receiveDataHandle}}),a("global-dialog-classify",{ref:"globalDialogClassify",attrs:{itemList:e.itemList,title:"添加影视"},on:{submit:e.dialogSubmitHandle}})],1)},i=[],o=a("3d49"),n=a("ade6"),r=a("7b3eb"),s=a("5d21"),c=a("2237"),u={name:"moviesPage",components:{GlobalLayout:o["a"],GlobalContainerTop:n["a"],GlobalDialogClassify:r["a"],GlobalPopover:s["a"],GlobalPage:c["a"]},data:function(){return{tableData:[],itemList:[{type:"input",label:"影视名",placeholder:"",key:"movieName"},{type:"radio",label:"类型",key:"type",radios:[{label:"动漫",key:1},{label:"纪录片",key:2},{label:"电影",key:3},{label:"连续剧",key:4}]},{type:"input",label:"评分",placeholder:"",key:"movieScore"},{type:"textarea",label:"评价",placeholder:"",key:"movieEvaluate"},{type:"switch",label:"状态",placeholder:"",key:"state"}],mapType:{1:"动漫",2:"纪录片",3:"电影",4:"连续剧"}}},methods:{formatterHandle:function(e){return this.mapType[e.type]},switchChangeHandle:function(e,t){this.$axios.moviesUpdate({id:t.id,state:e}).catch(function(){t.state=0===e?1:0})},receiveDataHandle:function(e){this.tableData=e},handleEdit:function(e){this.showDialog(e)},handleDelete:function(e){var t=this;this.$axios.moviesDelete(e.id).then(function(e){t.$refs.globalPage.getList()})},showDialog:function(e){this.$refs.globalDialogClassify.toggleVisibleHandle(e)},dialogSubmitHandle:function(e,t){var a=this,l="moviesAdd";"update"===t&&(l="moviesUpdate"),this.$axios[l](e).then(function(){a.$message.success("操作成功"),a.$refs.globalPage.getList()})},searchHandle:function(e){this.$refs.globalPage.searchList(e)}}},d=u,p=(a("0132"),a("2877")),b=Object(p["a"])(d,l,i,!1,null,null,null);t["default"]=b.exports},e08e:function(e,t,a){"use strict";var l=a("3f1c"),i=a.n(l);i.a}}]);
//# sourceMappingURL=chunk-9a33a064.dee7c03e.js.map