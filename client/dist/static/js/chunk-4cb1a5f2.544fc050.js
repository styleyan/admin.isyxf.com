(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cb1a5f2"],{"3f1c":function(t,e,a){},7610:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("global-layout",[a("global-container-top",{attrs:{placeholder:"请输入书名"},on:{searchHandle:t.searchHandle,addHandle:t.showDialog}}),a("el-table",{staticClass:"books-list",attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"进度:"}},[a("span",[t._v(t._s(e.row.progress))])]),a("el-form-item",{attrs:{label:"评分:"}},[a("span",[t._v(t._s(e.row.bookScore))])]),a("el-form-item",{attrs:{label:"推荐理由:"}},[a("span",[t._v(t._s(e.row.bookReason))])]),a("el-form-item",{attrs:{label:"评价:"}},[a("span",[t._v(t._s(e.row.bookEvaluate))])])],1)]}}])}),a("el-table-column",{attrs:{prop:"gmtCreate",label:"添加时间",width:"180"}}),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),a("el-table-column",{attrs:{width:"160",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.switchChangeHandle(a,e.row)}},model:{value:e.row.state,callback:function(a){t.$set(e.row,"state",a)},expression:"scope.row.state"}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return t.handleEdit(e.row)}}},[t._v("编辑")]),a("global-popover",{on:{submit:function(a){return t.handleDelete(e.row)}}})]}}])})],1),a("global-page",{ref:"globalPage",attrs:{request:"booksSearchList",searchParam:!0},on:{receiveData:t.receiveDataHandle}}),a("global-dialog-classify",{ref:"globalDialogClassify",attrs:{itemList:t.itemList,title:"添加书单"},on:{submit:t.dialogSubmitHandle}})],1)},o=[],i=a("3d49"),n=a("ade6"),s=a("7b3eb"),r=a("5d21"),c=a("2237"),u={name:"booksPage",components:{GlobalLayout:i["a"],GlobalContainerTop:n["a"],GlobalDialogClassify:s["a"],GlobalPopover:r["a"],GlobalPage:c["a"]},data:function(){return{tableData:[],currentPage3:1,itemList:[{type:"input",label:"书名",placeholder:"",key:"bookName"},{type:"radio",label:"进度",key:"progress",radios:[{label:"未读",key:0},{label:"正在读",key:1},{label:"已读",key:2}]},{type:"input",label:"评分",placeholder:"",key:"bookScore"},{type:"textarea",label:"推荐理由",placeholder:"",key:"bookReason"},{type:"textarea",label:"评价",placeholder:"",key:"bookEvaluate"},{type:"switch",label:"状态",placeholder:"",key:"state"}]}},methods:{switchChangeHandle:function(t,e){this.$axios.booksUpdate({id:e.id,state:t}).catch(function(){e.state=0===t?1:0})},receiveDataHandle:function(t){this.tableData=t},handleEdit:function(t){this.showDialog(t)},handleDelete:function(t){var e=this;this.$axios.booksDelete(t.id).then(function(t){e.$refs.globalPage.getList()})},showDialog:function(t){this.$refs.globalDialogClassify.toggleVisibleHandle(t)},dialogSubmitHandle:function(t,e){var a=this,l="booksAdd";"update"===e&&(l="booksUpdate"),this.$axios[l](t).then(function(){a.$message.success("操作成功"),a.$refs.globalPage.getList()})},searchHandle:function(t){this.$refs.globalPage.searchList(t)}}},b=u,d=(a("bf97"),a("2877")),f=Object(d["a"])(b,l,o,!1,null,null,null);e["default"]=f.exports},"7b3eb":function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{width:t.dialogWidth,title:t.title,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.rowData}},t._l(t.itemList,function(e,l){return a("el-form-item",{key:l,class:{"switch-item":"switch"===e.type||"radio"===e.type},attrs:{label:e.label,"label-width":t.formLabelWidth}},["switch"===e.type?[a("el-switch",{staticStyle:{"text-align":"left"},attrs:{"active-value":1,"inactive-value":0},model:{value:t.rowData[e.key],callback:function(a){t.$set(t.rowData,e.key,a)},expression:"rowData[item.key]"}})]:t._e(),"input"===e.type||"textarea"===e.type?[a("el-input",{attrs:{type:e.type,rows:e.rows||0,placeholder:e.placeholder},model:{value:t.rowData[e.key],callback:function(a){t.$set(t.rowData,e.key,a)},expression:"rowData[item.key]"}})]:t._e(),"radio"===e.type?[a("el-radio-group",{model:{value:t.rowData[e.key],callback:function(a){t.$set(t.rowData,e.key,a)},expression:"rowData[item.key]"}},t._l(e.radios,function(e){return a("el-radio",{key:e.key,attrs:{label:e.key}},[t._v(t._s(e.label))])}),1)]:t._e()],2)}),1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.buttonHandle(!1)}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.buttonHandle(!0)}}},[t._v("确 定")])],1)],1)},o=[],i=(a("ac6a"),{clone:function(t){return JSON.parse(JSON.stringify(t))}}),n={name:"global-dialog-classify",props:{title:{type:String,default:""},dialogWidth:{type:String,default:"500px"},itemList:{type:Array,default:function(){return[]}}},data:function(){return{dialogFormVisible:!1,formLabelWidth:"80px",rowData:this.initKeys(),type:0}},methods:{initKeys:function(){var t=this.itemList.map(function(t){return t.key}),e={};return t.forEach(function(t){e[t]=""}),e},buttonHandle:function(t){t&&this.$emit("submit",this.rowData,this.type),this.dialogFormVisible=!this.dialogFormVisible},toggleVisibleHandle:function(t){t?(this.type="update",this.rowData=i.clone(t)):(this.type="add",this.rowData=this.initKeys()),this.dialogFormVisible=!this.dialogFormVisible}}},s=n,r=(a("e08e"),a("2877")),c=Object(r["a"])(s,l,o,!1,null,null,null);e["a"]=c.exports},bf97:function(t,e,a){"use strict";var l=a("f40a"),o=a.n(l);o.a},e08e:function(t,e,a){"use strict";var l=a("3f1c"),o=a.n(l);o.a},f40a:function(t,e,a){}}]);
//# sourceMappingURL=chunk-4cb1a5f2.544fc050.js.map